<h1>Channel Podcasts</h1>

<% if policy(@channel).update? %>
<%= link_to "Edit Channel", edit_channel_path(@channel.id) %>
<%= link_to "Add Podcast", new_channel_podcast_path(@channel.slug) %>
<% end %>

<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Length</th>
      <th>Published</th>
      <th>Audio</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @podcasts.each do |podcast| %>
      <tr>
        <td><%= podcast.title %></td>
        <td><%= distance_of_time_in_words(podcast.length) %></td>
        <td><%= podcast.published ? 'yes' : 'no' %></td>
        <td><%= podcast.audio %></td>
        <td><%= link_to('Show',
          channel_podcast_slug_path(@channel.slug, podcast.slug)) %></td>
        <td><%= link_to('Edit',
          edit_podcast_path(podcast.id)) %></td>
        <td><%= link_to('Destroy',
          podcast_path(podcast.id), {
          method: :delete,
          data: {
            confirm: 'Are you sure?'
          }
        }) %></td>
      </tr>
    <% end %>
  </tbody>
</table>
